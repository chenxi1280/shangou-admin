<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<title>闪购</title>
<div th:replace="fragment/js::js"></div>
<div th:replace="fragment/map::map"></div>
<style>
    /*隐藏滚动条*/
    .hideScrollBar::-webkit-scrollbar {
        display: none;
    }

</style>
<body>
<div style="position: absolute;left: 0;right: 0;top: 0;bottom: 0">
    <div class="layui-row" style="height: 100%">
        <div class="layui-col-xs12   layui-col-md6 layui-col-md-offset3" style="height: 100%">
            <div style="position: absolute;top: 0;left: 0;right: 0;height: 40px">
                <div th:style="'display: flex;height: 100%;justify-content: space-between;align-items: center;background-image: url('+@{/images/home/headerImg.jpg}+');color: white;background-size:cover'"
                     onerror="this.backgroundImage.url='/images/home/rainbow.jpg'">
                    <div id="provinceDiv"
                         style="flex-grow: 1;padding: 10px 15px;font-size: 1rem;font-weight: bold;font-family: '等线';cursor: pointer;">
                        <div style="display: flex;align-items: center;white-space: nowrap">
                            <i class="layui-icon layui-icon-location" style="font-size: 1rem"></i>
                            <span style="margin-left: 10px;" id="cityArea">位置获取中</span><i
                                class="layui-icon-loading layui-icon layui-anim layui-anim-rotate layui-anim-loop"></i>
                        </div>
                    </div>
                    <div style="flex-grow: 1;padding: 10px 25px 10px 0;display: flex;align-items: center;">
                        <input class="layui-input" placeholder="搜索你想要的"
                               style="background: white;height: 30px;border-radius: 10px;color: gray;border: 1px"/>
                        <i class="layui-icon layui-icon-search" style="font-size: 1.2rem;margin-left: 10px"></i>
                    </div>
                </div>

            </div>
            <div class="hideScrollBar"
                 style="position: absolute;top: 40px;left: 0;right: 0;bottom: 50px;overflow-y: auto">
                <div id="mapC"></div>
            </div>
            <div>
                <div th:replace="fragment/bottom_menu::bottom_menu"></div>
            </div>
        </div>

    </div>

</div>
<script th:inline="javascript" type="text/javascript">

    let position;
    $(function () {
        initMap(function (res) {
            $("#cityArea").text(res.name);
            position = res.location;
            console.log(position)
        });
        getCityInfo(function (res) {
            let cityArea = $("#cityArea");
            cityArea.text(res.city);
            cityArea.next().css({display: 'none'})
        });
        $("#provinceDiv").click(function () {
            toggleMap();
        });

    })

</script>

</body>
</html>
